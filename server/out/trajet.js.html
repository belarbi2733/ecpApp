<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: trajet.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: trajet.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var db = require("../config/config.js");
/**
*Rides module that contain all SQL request that are relative to the ride table
*@module
*/
let Trajet = {
  /**
  *@method getTrajet
  *@desc select rides informations according to the id of a user
  *@param {number}idUser
  */
  getTrajet: function(trajet, callback)
  {
    return db.query('SELECT * FROM trajet WHERE id_user = $1 ',[trajet.body.idUser],callback);
  },
  /**
  *@method getTrajetConduct
  *@desc select rides information according to the ride id
  *@param {number}id id of a ride
  */
  getTrajetConduct: function(trajet, callback)
  {
    return db.query('select * from trajet where id = $1',[trajet.body.id] ,callback);
  },
  /**
  *@method getTrajetColis
  *@desc select rides informations of a ride that has a package
  *@param {number}idColis
  */
  getTrajetColis: function(idColis, callback)
  {
    return db.query('select * from trajet where id_colis = $1',[idColis] ,callback);
  },
  /**
  *@method getColisId
  *@desc get the id of a package of a user
  *@param {number}idUser
  */
  getColisId: function(trajet, callback)
  {
    return db.query('select id_colis from trajet where id_user = $1',[trajet.body.idUser],callback);
  },
  /**
  *@method getTrajetAll
  *@desc select rides inforamtions of a ride that is into a specific round
  *@param {number}idTour
  */
  getTrajetAll: function(trajet, callback)
  {
    console.log(trajet.body.idTour);
    return db.query('select * from trajet where id_tournee = $1',[trajet.body.idTour],callback);
  },
  /**
  *@method getCode
  *@desc get the code that is relative to a ride
  *@param {number}id id of the ride
  */
  getCode: function(trajet, callback){
    return db.query('select code from trajet where id = $1', [trajet.body.id], callback);
  },
  /**
  *@method validateStatus
  *@desc set the status of a ride to 2 that means that the ride has been done
  *@param {nummber}id id of the ride
  */
  validateStatus: function(id, callback){
    return db.query('update trajet set statut=2 where id = $1', [id], callback);
  },
  /**
  *@method setComment
  *@desc set the message into the database and change the ride statut to 3 that means that the user has complain
  *@param {string}comment the message that the user send to the admin
  *@param {number}id id of the ride
  *@link
  */
  setComment: function(info, callback){
    return db.query('update trajet set comment = $1, statut=3 where id= $2', [info.query['comment'], info.query['id']], callback);
  }
};
module.exports = Trajet;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-car.html">car</a></li><li><a href="module-colis.html">colis</a></li><li><a href="module-tournee.html">tournee</a></li><li><a href="module-trajet.html">trajet</a></li><li><a href="module-user.html">user</a></li></ul><h3>Global</h3><ul><li><a href="global.html#app">app</a></li><li><a href="global.html#checkCode">checkCode</a></li><li><a href="global.html#colis">colis</a></li><li><a href="global.html#colisonly">colisonly</a></li><li><a href="global.html#comment">comment</a></li><li><a href="global.html#getCode">getCode</a></li><li><a href="global.html#getDriver">getDriver</a></li><li><a href="global.html#getIdCar">getIdCar</a></li><li><a href="global.html#getPosition">getPosition</a></li><li><a href="global.html#getUserId">getUserId</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#position">position</a></li><li><a href="global.html#rating">rating</a></li><li><a href="global.html#tournee">tournee</a></li><li><a href="global.html#trajet">trajet</a></li><li><a href="global.html#trajetAll">trajetAll</a></li><li><a href="global.html#trajetColis">trajetColis</a></li><li><a href="global.html#trajetConduct">trajetConduct</a></li><li><a href="global.html#validate">validate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sun Jan 05 2020 03:14:58 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
